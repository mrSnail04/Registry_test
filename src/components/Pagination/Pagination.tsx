import React from 'react';
import cn from 'classnames';
import {usePagination, DOTS} from "../../hoks/usePagination/usePagination";
import styles from './Pagination.module.scss';

export type PaginationProps = {
    onPageChange: (prevState: number) => void | number | string,
    className?: string,
    totalCount: number,
    siblingCount: number,
    currentPage: number,
    pageSize: number
}
export const Pagination = ({
           onPageChange,
           totalCount,
           siblingCount = 1,
           currentPage,
           pageSize,
           className
}: PaginationProps) => {

    const paginationRange:(string|number)[]|undefined = usePagination({
        currentPage,
        totalCount,
        siblingCount,
        pageSize
    })
    if (paginationRange!.length < 2) {
        return null;
    }
    const onNext = () => {
        onPageChange(currentPage + 1);
    };
    const onPrevious = () => {
        onPageChange(currentPage - 1);
    };
    const onNextDuble = () => {
        onPageChange(currentPage + 2);
    };
    const onPreviousDuble = () => {
        onPageChange(currentPage - 2);
    };

    let lastPage = paginationRange![paginationRange!.length - 1];
    let preLastPage = paginationRange![paginationRange!.length - 2];
    return (
        <div
            className={cn(styles.paginationContainer, {[styles.className]: className})}
        >
            <div className={styles.borderPagination}>
                <div
                    className={cn(styles.paginationItem, styles.arrowDuble, styles.left,{
                        [styles.disabled]: currentPage <= 2
                    })}
                    onClick={onPreviousDuble}
                >
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16.191 9.36163L21.6212 15.0721C21.7412 15.1959 21.8365 15.3431 21.9015 15.5053C21.9665 15.6675 22 15.8415 22 16.0172C22 16.1929 21.9665 16.3669 21.9015 16.5291C21.8365 16.6914 21.7412 16.8386 21.6212 16.9623L16.191 22.6063C16.072 22.731 15.9303 22.83 15.7742 22.8976C15.6182 22.9652 15.4508 23 15.2817 23C15.1126 23 14.9453 22.9652 14.7892 22.8976C14.6331 22.83 14.4915 22.731 14.3724 22.6063C14.1339 22.3569 14 22.0195 14 21.6678C14 21.3162 14.1339 20.9788 14.3724 20.7294L18.9061 16.0172L14.3724 11.3051C14.1358 11.0571 14.0024 10.7225 14.001 10.3733C14 10.1981 14.0323 10.0244 14.0961 9.86226C14.1598 9.70008 14.2537 9.55257 14.3724 9.42819C14.4872 9.29897 14.6255 9.19467 14.7792 9.12132C14.933 9.04797 15.0993 9.00701 15.2684 9.00082C15.4375 8.99463 15.6061 9.02334 15.7644 9.08526C15.9228 9.14719 16.0678 9.24113 16.191 9.36163Z" fill="#4D4D4F"/>
                        <path d="M8.19101 9.36163L13.6212 15.0721C13.7412 15.1959 13.8365 15.3431 13.9015 15.5053C13.9665 15.6675 14 15.8415 14 16.0172C14 16.1929 13.9665 16.3669 13.9015 16.5291C13.8365 16.6914 13.7412 16.8386 13.6212 16.9623L8.19101 22.6063C8.07195 22.731 7.93031 22.83 7.77424 22.8976C7.61818 22.9652 7.45078 23 7.28171 23C7.11265 23 6.94525 22.9652 6.78919 22.8976C6.63312 22.83 6.49148 22.731 6.37242 22.6063C6.13389 22.3569 6 22.0195 6 21.6678C6 21.3162 6.13389 20.9788 6.37242 20.7294L10.9061 16.0172L6.37242 11.3051C6.13582 11.0571 6.00243 10.7225 6.00102 10.3733C6.00004 10.1981 6.03235 10.0244 6.09608 9.86226C6.15981 9.70008 6.25372 9.55257 6.37242 9.42819C6.48719 9.29897 6.62546 9.19467 6.77924 9.12132C6.93302 9.04797 7.09927 9.00701 7.26836 9.00082C7.43746 8.99463 7.60606 9.02334 7.76442 9.08526C7.92279 9.14719 8.06778 9.24113 8.19101 9.36163Z" fill="#4D4D4F"/>
                    </svg>
                </div>
                <div
                    className={cn(styles.paginationItem, styles.arrow, styles.left,{
                        [styles.disabled]: currentPage === 1
                    })}
                    onClick={onPrevious}
                >
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.191 9.36163L19.6212 15.0721C19.7412 15.1959 19.8365 15.3431 19.9015 15.5053C19.9665 15.6675 20 15.8415 20 16.0172C20 16.1929 19.9665 16.3669 19.9015 16.5291C19.8365 16.6914 19.7412 16.8386 19.6212 16.9623L14.191 22.6063C14.072 22.731 13.9303 22.83 13.7742 22.8976C13.6182 22.9652 13.4508 23 13.2817 23C13.1126 23 12.9453 22.9652 12.7892 22.8976C12.6331 22.83 12.4915 22.731 12.3724 22.6063C12.1339 22.3569 12 22.0195 12 21.6678C12 21.3162 12.1339 20.9788 12.3724 20.7294L16.9061 16.0172L12.3724 11.3051C12.1358 11.0571 12.0024 10.7225 12.001 10.3733C12 10.1981 12.0323 10.0244 12.0961 9.86226C12.1598 9.70008 12.2537 9.55257 12.3724 9.42819C12.4872 9.29897 12.6255 9.19467 12.7792 9.12132C12.933 9.04797 13.0993 9.00701 13.2684 9.00082C13.4375 8.99463 13.6061 9.02334 13.7644 9.08526C13.9228 9.14719 14.0678 9.24113 14.191 9.36163Z" fill="#4D4D4F"/>
                    </svg>
                </div>
                {paginationRange!.map((pageNumber:string|number,)=> {
                    if (pageNumber === DOTS) {
                        return <div className={cn(styles.paginationItem, styles.dots)}>&#8230;</div>;
                    }
                    return (
                        <div
                            className={cn(styles.paginationItem, {
                                [styles.selected]: pageNumber === currentPage
                            })}
                            onClick={() => onPageChange(pageNumber as number)}
                        >
                            {pageNumber}
                        </div>
                    );
                })}
                <div
                    className={cn(styles.paginationItem,{
                        [styles.disabled]: currentPage === lastPage
                    })}
                    onClick={onNext}
                >
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.191 9.36163L19.6212 15.0721C19.7412 15.1959 19.8365 15.3431 19.9015 15.5053C19.9665 15.6675 20 15.8415 20 16.0172C20 16.1929 19.9665 16.3669 19.9015 16.5291C19.8365 16.6914 19.7412 16.8386 19.6212 16.9623L14.191 22.6063C14.072 22.731 13.9303 22.83 13.7742 22.8976C13.6182 22.9652 13.4508 23 13.2817 23C13.1126 23 12.9453 22.9652 12.7892 22.8976C12.6331 22.83 12.4915 22.731 12.3724 22.6063C12.1339 22.3569 12 22.0195 12 21.6678C12 21.3162 12.1339 20.9788 12.3724 20.7294L16.9061 16.0172L12.3724 11.3051C12.1358 11.0571 12.0024 10.7225 12.001 10.3733C12 10.1981 12.0323 10.0244 12.0961 9.86226C12.1598 9.70008 12.2537 9.55257 12.3724 9.42819C12.4872 9.29897 12.6255 9.19467 12.7792 9.12132C12.933 9.04797 13.0993 9.00701 13.2684 9.00082C13.4375 8.99463 13.6061 9.02334 13.7644 9.08526C13.9228 9.14719 14.0678 9.24113 14.191 9.36163Z" fill="#4D4D4F"/>
                    </svg>
                </div>
                <div
                    className={cn(styles.paginationItem, {
                        [styles.disabled]: currentPage >= preLastPage
                    })}
                    onClick={onNextDuble}
                >
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16.191 9.36163L21.6212 15.0721C21.7412 15.1959 21.8365 15.3431 21.9015 15.5053C21.9665 15.6675 22 15.8415 22 16.0172C22 16.1929 21.9665 16.3669 21.9015 16.5291C21.8365 16.6914 21.7412 16.8386 21.6212 16.9623L16.191 22.6063C16.072 22.731 15.9303 22.83 15.7742 22.8976C15.6182 22.9652 15.4508 23 15.2817 23C15.1126 23 14.9453 22.9652 14.7892 22.8976C14.6331 22.83 14.4915 22.731 14.3724 22.6063C14.1339 22.3569 14 22.0195 14 21.6678C14 21.3162 14.1339 20.9788 14.3724 20.7294L18.9061 16.0172L14.3724 11.3051C14.1358 11.0571 14.0024 10.7225 14.001 10.3733C14 10.1981 14.0323 10.0244 14.0961 9.86226C14.1598 9.70008 14.2537 9.55257 14.3724 9.42819C14.4872 9.29897 14.6255 9.19467 14.7792 9.12132C14.933 9.04797 15.0993 9.00701 15.2684 9.00082C15.4375 8.99463 15.6061 9.02334 15.7644 9.08526C15.9228 9.14719 16.0678 9.24113 16.191 9.36163Z" fill="#4D4D4F"/>
                        <path d="M8.19101 9.36163L13.6212 15.0721C13.7412 15.1959 13.8365 15.3431 13.9015 15.5053C13.9665 15.6675 14 15.8415 14 16.0172C14 16.1929 13.9665 16.3669 13.9015 16.5291C13.8365 16.6914 13.7412 16.8386 13.6212 16.9623L8.19101 22.6063C8.07195 22.731 7.93031 22.83 7.77424 22.8976C7.61818 22.9652 7.45078 23 7.28171 23C7.11265 23 6.94525 22.9652 6.78919 22.8976C6.63312 22.83 6.49148 22.731 6.37242 22.6063C6.13389 22.3569 6 22.0195 6 21.6678C6 21.3162 6.13389 20.9788 6.37242 20.7294L10.9061 16.0172L6.37242 11.3051C6.13582 11.0571 6.00243 10.7225 6.00102 10.3733C6.00004 10.1981 6.03235 10.0244 6.09608 9.86226C6.15981 9.70008 6.25372 9.55257 6.37242 9.42819C6.48719 9.29897 6.62546 9.19467 6.77924 9.12132C6.93302 9.04797 7.09927 9.00701 7.26836 9.00082C7.43746 8.99463 7.60606 9.02334 7.76442 9.08526C7.92279 9.14719 8.06778 9.24113 8.19101 9.36163Z" fill="#4D4D4F"/>
                    </svg>

                </div>
            </div>
        </div>
    );
};